syntax = "proto3";

import "google/protobuf/empty.proto";

package dev.httpmarco.polocloud.v1.proto;

option java_package = "dev.httpmarco.polocloud.v1.player";
option java_multiple_files = true;

service PlayerController {
  rpc findAll (google.protobuf.Empty) returns (PlayerFindResponse);
  rpc findByName (PlayerFindByNameRequest) returns (PlayerFindResponse);
  rpc findByService (PlayerFindByServiceRequest) returns (PlayerFindResponse);
  rpc playerCount(google.protobuf.Empty) returns (PlayerCountResponse);

  rpc messageRegister(google.protobuf.Empty) returns (stream PlayerActorMessage);
}

message PlayerFindByNameRequest {
  string name = 1;
}

message PlayerFindByServiceRequest {
  string current_service_name = 1;
}

message PlayerSnapshot {
  string unique_id = 1;
  string name = 2;
  string current_service_name = 3;
  int64 first_time_joined = 4;
}

message PlayerFindResponse {
  repeated PlayerSnapshot players = 1;
}

message PlayerCountResponse {
  int32 count = 1;
}

message PlayerActorMessage {
  string uuid = 1;
  string message = 2;
}